{"Title":"Linux 主机与 KVM 虚拟机内 Windows 进行 FTP 文件传输的配置说明","Time":1565712000000,"Content":"<span class='winformComment'>'Linux 主机与 KVM 虚拟机内 Windows 进行 FTP 文件传输的配置说明<br>'本文发布于 2019年 08月 14日<br>'本网站所有文章，除非另外注明，否则皆采用 <a href='https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh' target='_blank'>CC BY-NC-SA 4.0</a> 进行许可。 </span><br><p>我在 KVM 虚拟机里安装了 Windows 10 ，然后发现客户机与宿主机之间的文件传输还是很麻烦。<br />\n动不动就塞一张 ISO 给虚拟 DVD 驱动器，太麻烦了。<br />\n在网上翻来翻去也没研究透 SMB Mount 什么的用法。<br />\n最后自己研究出了 FTP 的办法，接下来我把过程写在这里。</p>\n<ol>\n<li><p>首先检查自己的 Linux 系统的代理，因为我被我自己的代理给坑死了，Privoxy 是不支持 FTP 代理的，而我居然还写了进去。<br />\n检查一下自己的 <code>export | grep ftp_proxy</code> ，最好为空，我不觉得现在还有人需要在 FTP 上挂代理了。<br />\n还有检查一下桌面的代理设置：<br />\n<img src=\"https://s2.ax1x.com/2019/08/14/mPLlUU.png\" alt=\"\" /></p>\n</li>\n<li><p>设置好虚拟机的网络，类型要 NAT ，不要桥接。\n<img src=\"https://s2.ax1x.com/2019/08/14/mPzhaq.png\" alt=\"\" /><br />\n然后把虚拟机的 IP 给锁上，免得自己跑偏了。<br />\n<img src=\"https://s2.ax1x.com/2019/08/14/mPzG8O.png\" alt=\"\" /></p>\n</li>\n<li><p>接下来在 Windows 里用 IIS 开启一个粗暴的 FTP 服务器。\n<img src=\"https://s2.ax1x.com/2019/08/14/mPOnRH.png\" alt=\"\" /><br />\n首先要启用 IIS 和 FTP ，安装好之后，在开始菜单里找到并打开 IIS 。<br />\n<img src=\"https://s2.ax1x.com/2019/08/14/mPOIw6.png\" alt=\"\" /><br />\n接下来按图里操作，如果你懂的话，可以自己改改。<br />\n<img src=\"https://s2.ax1x.com/2019/08/14/mPXEXn.png\" alt=\"\" /><br />\n名字随便起，然后给它一个文件夹。<br />\n<img src=\"https://s2.ax1x.com/2019/08/14/mPXY0x.png\" alt=\"\" /><br />\nIP 不绑定，端口默认，然后 SSL 选没有。<br />\n<img src=\"https://s2.ax1x.com/2019/08/14/mPXynI.png\" alt=\"\" /><br />\n全员支持，全员读写。<br />\n<img src=\"https://s2.ax1x.com/2019/08/14/mPXLNT.png\" alt=\"\" /><br />\nFTP 服务器的创建到这里就完成了，但是其实还是有权限问题，默认还是只能读取不能写入的。<br />\n接下来跑到 Windows 文件管理器里打开这个文件夹的属性。<br />\n按照下面从左到右的顺序进行操作：<br />\n<img src=\"https://s2.ax1x.com/2019/08/14/mPvpRg.png\" alt=\"\" /><br />\n给 Everyone 来个全部控制允许就行了（粗暴）<br />\n<img src=\"https://s2.ax1x.com/2019/08/14/mPvGo6.png\" alt=\"\" /><br />\n然后一路 OK 保存，关闭属性窗口。<br />\nIIS 默认是开机自动启动在后台的，所以你不用自己手动让 FTP 服务器开机启动。</p>\n</li>\n<li><p>在虚拟机里把防火墙对 FTP 的封锁进行解除，当然你要是图省事，直接关了防火墙就好了。<br />\nhttps://jingyan.baidu.com/article/c35dbcb099987c8916fcbcee.html</p>\n</li>\n<li><p>给这个 FTP 文件夹先随便创建一个文件，免得等会看不出来有没有连接成功。\n<img src=\"https://s2.ax1x.com/2019/08/14/mPvz01.png\" alt=\"\" /></p>\n</li>\n<li><p>接下来可以先用浏览器简单试试了，记得把浏览器代理也给关了或者跳过 192.168 的IP。\n<img src=\"https://s2.ax1x.com/2019/08/14/mip2En.png\" alt=\"\" /><br />\n成功了就好，不成功就真的拉倒了，我也不知道怎么办了。</p>\n</li>\n<li><p>然后就可以在系统自带的文件管理器里添加 FTP 文件夹了，我这里使用的是 KDE 的 Dolphin 。<br />\n<img src=\"https://s2.ax1x.com/2019/08/14/miPk1f.png\" alt=\"\" /><br />\n<img src=\"https://s2.ax1x.com/2019/08/14/miiLLD.png\" alt=\"\" /><br />\n<img src=\"https://s2.ax1x.com/2019/08/14/miFPQf.png\" alt=\"\" /><br />\n<img src=\"https://s2.ax1x.com/2019/08/14/miF5nS.png\" alt=\"\" /><br />\n能顺利连接和操作就好，不行就拉倒，我真的没什么办法了。</p>\n</li>\n</ol>"}