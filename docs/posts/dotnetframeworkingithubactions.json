{"Title":"使用 GitHub Actions 编译 .NET Framework 程序","Time":1576252800000,"Content":"<span class='winformComment'>'使用 GitHub Actions 编译 .NET Framework 程序<br>'本文发布于 2019年 12月 14日<br>'本网站所有文章，除非另外注明，否则皆采用 <a href='https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh' target='_blank'>CC BY-NC-SA 4.0</a> 进行许可。 </span><br><p>非常有意思，GitHub Actions 里自带有 Windows Server 的镜像，还预装了 Visual Studio ，可谓很爽了。<br />\n新建一个下面这样的 workflow 到你的项目即可在push的时候让 github 给你编译 .net framework 程序。<br />\n我用 &lt;&gt; 框起来的文字，记得把 &lt;&gt; 这两个符号本身给去了。路径尽量修成使用/符的，而不是\\符的。<br />\n如果你不使用任何 nuget 包，要把关于 nuget 的那两个步骤去掉。</p>\n<pre><code class=\"language-yml\">name: CI\n\non: [push]\n\njobs:\n  build:\n    runs-on: windows-latest\n    steps:\n      - name: checkout\n        uses: actions/checkout@v1\n      - name: setup nuget \n        uses: warrenbuckley/Setup-Nuget@v1\n      - name: nuget restore \n        working-directory: &lt;pjPath&gt;  #这里写 .sln 的路径或者 packages.config 文件的路径\n        run: nuget.exe restore \n      - name: msbuild\n        working-directory: &lt;pjPath&gt; #这里写 .sln 的路径或者 .vbproj .csproj 文件的路径\n        run: &quot;&amp; 'C:/Program Files (x86)/Microsoft Visual Studio/2019/Enterprise/MSBuild/Current/Bin/MSBuild.exe' &lt;options&gt;&quot;\n        #&lt;options&gt;写编译参数\n      - name: upload\n        uses: actions/upload-artifact@v1\n        with:\n          name: compiled_files\n          path: &lt;outputPath&gt;  #这里写编译出来的文件夹的路径，一般是  ./xx/bin/Debug 这种\n</code></pre>\n<p>在 Windows 上运行的 steps 都是用 PowerShell 6 来运行的。<br />\n如果你想使用绝对路径，Github 都是把咱们的项目放在 <code>d:\\a\\XXX\\XXX</code> 文件夹里，XXX是你的项目名字，是的，文件夹有两层，不是分支名。<br />\n不要试着用命令切换工作文件夹，因为工作机制的关系，工作文件夹永远都在项目根目录，应该在 step 内使用 working-directory 参数。<br />\n<img src=\"https://s2.ax1x.com/2019/12/14/QRuhSe.png\" alt=\"\" /></p>\n<p>一个现成的示例 https://github.com/gordonwalkedby/OnsetPackageJsonCreater/blob/master/.github/workflows/main.yml</p>"}